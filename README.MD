# ğŸ“˜ README â€” Lancer le backend (Express + Prisma + TypeScript Strict)

Ce guide explique **pas Ã  pas** comment installer, configurer et exÃ©cuter ce backend de gestion de stock (Express + PostgreSQL + Prisma + Docker + TypeScript strict).

---

# ğŸš€ 1. PrÃ©requis
Assureâ€‘toi dâ€™avoir installÃ© :

- **Node.js** (â‰¥ 18)
- **npm** ou **yarn**
- **Docker + Docker Compose**
- **Git** (facultatif)

---

# ğŸ”§ 2. Installation du projet
Clone ou rÃ©cupÃ¨re le dossier du backend, puis :

```bash
npm install
```

Cela installe :
- Express
- Prisma + @prisma/client
- Typescript strict
- bcrypt, JWT, cors, dotenv

---

# ğŸ—„ 3. Configuration des variables dâ€™environnement
CrÃ©e un fichier `.env` Ã  la racine :

```
DATABASE_URL="postgresql://postgres:password@localhost:5432/stockdb"
JWT_SECRET="supersecret"
```

Si tu utilises Docker, lâ€™URL changera automatiquement pour :
```
postgresql://postgres:password@db:5432/stockdb
```

---

# ğŸ§± 4. Lancer PostgreSQL + API en local (Docker Compose)
La commande :
```bash
docker compose up --build
```

Lance :
- PostgreSQL (port **5432**) 
- Lâ€™API Express (port **9000**)

â³ Le backend sera disponible Ã  :
```
http://localhost:9000
```

---

# ğŸ”„ 5. Initialiser Prisma
Une fois PostgreSQL dÃ©marrÃ© :

```bash
npx prisma migrate dev --name init
```

Puis gÃ©nÃ©rer le client Prisma :

```bash
npx prisma generate
```

---

# ğŸƒ 6. Lancer le serveur en mode dÃ©veloppement
```bash
npm run dev
```

---

# ğŸ§ª 7. Tester lâ€™API

### ğŸ” Authentification
**POST /auth/register**
```json
{
  "username": "admin",
  "password": "1234"
}
```

**POST /auth/login**
RÃ©ponse :
```json
{ "message":"Login successful","token": "xxxxxxxxx" }
```

Garde ce token pour les routes protÃ©gÃ©es.

---

# ğŸ“¦ 8. Endpoints disponibles
### Marques
- `GET /brands`
- `POST /brands`

### PiÃ¨ces
- `GET /parts`
- `POST /parts`

### Mouvements (entrÃ©e/sortie)
- `GET /movements`
- `POST /movements`
  - type = "ENTREE" ou "SORTIE"
  - met automatiquement Ã  jour le stock

---

# ğŸŒ 9. DÃ©ploiement sur Render
Plus tard, lors du dÃ©ploiement :

1. CrÃ©e un service **Web Service â†’ Node.js**
2. Ajoute un service **PostgreSQL**
3. Copie lâ€™URL dans `DATABASE_URL`
4. Render lance automatiquement :
   ```bash
   npm install
   npm run build
   npm start
   ```
# Stock_manager_Back
